{extend name="base:base" /}
<!-- Page Content -->
{block name='right'}
<object classid="clsid:5EB842AE-5C49-4FD8-8CE9-77D4AF9FD4FF" id="IdrControl1" width="100" height="0"></object>
<div id="content">
	<!-- Top Navigation -->
	<nav class="navbar navbar-default">
		<div class="container-fluid">
			<div class="navbar-header">
				<span class="ti-menu" id="sidebarCollapse"></span>
			</div>
			<ul class="nav justify-content-end">
				<li class="nav-item">
					<a class="nav-link" data-toggle="modal" data-target=".lorvens-modal-lg">
						<span class="ti-search"></span>
					</a>
					<div class="modal fade lorvens-modal-lg" tabindex="-1" role="dialog"  aria-hidden="true">
						<div class="modal-dialog modal-lorvens">
							<div class="modal-content lorvens-box-shadow">
								<div class="modal-header">
									<h5 class="modal-title">Serach Client/Project:</h5>
									<span class="ti-close" data-dismiss="modal" aria-label="Close">
									</span>
								</div>
								<div class="modal-body">
									<form>
										<div class="form-group">
											<input type="text" class="form-control" id="search-term" placeholder="Type text here">
											<button type="button" class="btn btn-lorvens lorvens-bg">
												<span class="ti-location-arrow"></span> Search</button>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</li>
				<li class="nav-item">
					<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
						<span class="ti-announcement"></span>
					</a>
					<div class="dropdown-menu lorvens-box-shadow notifications animated flipInY">
						<h5>Notifications</h5>
						<a class="dropdown-item" href="#">
							<span class="ti-comment-alt"></span> New User Registered</a>
						<a class="dropdown-item" href="#">
							<span class="ti-help-alt"></span> Client asked to send Quotaion</a>
						<a class="dropdown-item" href="#">
							<span class="ti-time"></span> Have schedule meeting today</a>
						<a class="dropdown-item" href="#">
							<span class="ti-comment-alt"></span> New User Registered</a>
					</div>
				</li>
				<li class="nav-item">
					<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
						<span class="ti-user"></span>
					</a>
					<div class="dropdown-menu lorvens-box-shadow profile animated flipInY">
						<h5>John Willing</h5>
						<a class="dropdown-item" href="#">
							<span class="ti-settings"></span> Settings</a>
						<a class="dropdown-item" href="#">
							<span class="ti-help-alt"></span> Help</a>
						<a class="dropdown-item" href="#">
							<span class="ti-power-off"></span> Logout</a>
					</div>
				</li>
			</ul>
		</div>
	</nav>
	<!-- /Top Navigation -->
	<!-- Breadcrumb -->
	<ol class="breadcrumb">
		<li class="breadcrumb-item">
			<a href="index.html">
				<span class="ti-home"></span>
			</a>
		</li>
		<li class="breadcrumb-item active">会员档案添加</li>
	</ol><!-- /Breadcrumb -->
	<!-- Main Content -->
	<div class="container-fluid">
		<!-- Page Title -->
		<div class="row">
			<div class="col-md-12">
				<h3 class="block-title">会员档案添加</h3>
				<h7 id="card" style="color:red;margin-left: 20px;">读卡器请使用IE11浏览器进行操作。</h7>
			</div>
		</div>
		<!-- /Page Title -->
		<div class="row">
			<div class="col-md-12">
				<div class="widget-area-2 lorvens-box-shadow">
					<!-- Form Item -->
					<ul class="nav nav-tabs" id="myTab" role="tablist">
						<li class="nav-item">
							<a class="nav-link active show" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="false">
								<font class="widget-title" style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本档案</font></font>
							</a>
						</li>
					</ul>
					<form action="{:url('Member/addMemberMsg')}" method="post">
					<div class="tab-content" id="myTabContent">
						<input type="hidden" name= "id" value="{$member.id}">
						<!--基本资料-->
						<div class="lorvens-widget tab-pane fade active show" id="home" role="tabpanel" aria-labelledby="home-tab" style="padding-top: 30px;">
							<div class="input-group">
								<div class="form-group row col-md-6">
									<label class="col-sm-2 col-form-label" style="line-height:2.5;">服务中心：</label>
									<div class="col-sm-10">
										<input type="text" name= "fuwuzhongxin" class="form-control" value="" readonly placeholder="服务中心">
									</div>
								</div>
								<div class="form-group row col-md-6">
									<label class="col-sm-2 col-form-label" style="line-height:2.5;">工作室：</label>
									<div class="col-sm-10">
										<input type="text" class="form-control" name="gongzuoshi" value="" readonly="readonly" placeholder="工作室">
									</div>
								</div>
							</div>
							<div class="input-group">
								<div class="form-group row col-md-6">
									<label class="col-sm-2 col-form-label" style="line-height:2.5;">会员编号：</label>
									<div class="col-sm-10">
										<input type="text" class="form-control" name="bianhao" value="{$member.bianhao}" id="cardId" readonly placeholder="会员编号">
									</div>
								</div>
								<div class="form-group row col-md-6">
									<label class="col-sm-2 col-form-label" style="line-height:2.5;">职业：</label>
									<div class="col-sm-10">
										<select class="form-control" name="zhiye" id="zhiye">
											{if $member['zhiye'] == '白领'}
													<option>白领</option>
													<option>公务员</option>
													<option>工人</option>
													<option>农民</option>
													<option>科研人员</option>
													<option>其它</option>
											{elseif $member['zhiye'] == '公务员' /}
													<option>公务员</option>
													<option>白领</option>
													<option>工人</option>
													<option>农民</option>
													<option>科研人员</option>
													<option>其它</option>
											{elseif $member['zhiye'] == '工人' /}
													<option>工人</option>
													<option>白领</option>
													<option>公务员</option>
													<option>农民</option>
													<option>科研人员</option>
													<option>其它</option>
											{elseif $member['zhiye'] == '农民' /}
													<option>农民</option>
													<option>白领</option>
													<option>公务员</option>
													<option>工人</option>
													<option>科研人员</option>
													<option>其它</option>
											{elseif $member['zhiye'] == '科研人员' /}
													<option>科研人员</option>
													<option>白领</option>
													<option>公务员</option>
													<option>工人</option>
													<option>农民</option>
													<option>其它</option>
											{elseif $member['zhiye'] == '其它' /}
													<option>其它</option>
													<option>白领</option>
													<option>公务员</option>
													<option>工人</option>
													<option>农民</option>
													<option>科研人员</option>
											{elseif $member['zhiye'] == '无' /}
													<option>无</option>
													<option>其它</option>
													<option>白领</option>
													<option>公务员</option>
													<option>工人</option>
													<option>农民</option>
													<option>科研人员</option>
											{/if}
										</select>
									</div>
								</div>
							</div>
							<div class="input-group">
								<div class="form-group row col-md-6">
									<label class="col-sm-2 col-form-label" style="line-height:2.5;">姓名：</label>
									<div class="col-sm-10">
										<input type="text" class="form-control" name="name" value="{$member.name}" id="name" placeholder="姓名">
									</div>
								</div>
								<div class="form-group row col-md-6">
									<label class="col-sm-2 col-form-label" style="line-height:2.5;">身份证号：</label>
									<div class="col-sm-10">
										<input type="text" class="form-control" name="idnum" value="{$member.idnum}" id="idnum" placeholder="身份证号">
									</div>
								</div>
							</div>
							<div class="input-group">
								<div class="form-group row col-md-6">
									<label class="col-sm-2 col-form-label" style="line-height:2.5;">性别：</label>
									<div class="col-sm-10">
										<select class="form-control" name="sex"  id="sex">
											{if $member['sex'] == '男'}
											<option value="男">男</option>
											<option value="女">女</option>
											{elseif $member['sex'] == '女' /}
											<option value="女">女</option>
											<option value="男">男</option>
											{/if}
										</select>
									</div>
								</div>
								<div class="form-group row col-md-6">
									<label class="col-sm-2 col-form-label" style="line-height:2.5;">年龄：</label>
									<div class="col-sm-10">
										<input type="text" class="form-control" name="age" value="{$member.age}" id="age" placeholder="年龄">
									</div>
								</div>
							</div>
							<div class="input-group">
								<div class="form-group row col-md-6">
									<label class="col-sm-2 col-form-label" style="line-height:2.5;">文化程度：</label>
									<div class="col-sm-10">
										<select class="form-control" name="wenhua" value="" id="wenhua">
											{if $member['edu'] == '无' /}
											<option>无</option>
											<option>小学</option>
											<option>初中</option>
											<option>高中</option>
											<option>中专</option>
											<option>大专</option>
											<option>本科</option>
											<option>硕士</option>
											<option>博士</option>
											{elseif $member['edu'] == '小学' /}
											<option>小学</option>
											<option>无</option>
											<option>初中</option>
											<option>高中</option>
											<option>中专</option>
											<option>大专</option>
											<option>本科</option>
											<option>硕士</option>
											<option>博士</option>
											{elseif $member['edu'] == '初中' /}
											<option>初中</option>
											<option>小学</option>
											<option>无</option>
											<option>高中</option>
											<option>中专</option>
											<option>大专</option>
											<option>本科</option>
											<option>硕士</option>
											<option>博士</option>
											{elseif $member['edu'] == '高中' /}
											<option>高中</option>
											<option>初中</option>
											<option>小学</option>
											<option>无</option>
											<option>中专</option>
											<option>大专</option>
											<option>本科</option>
											<option>硕士</option>
											<option>博士</option>
											{elseif $member['edu'] == '中专' /}
											<option>中专</option>
											<option>高中</option>
											<option>初中</option>
											<option>小学</option>
											<option>无</option>
											<option>大专</option>
											<option>本科</option>
											<option>硕士</option>
											<option>博士</option>
											{elseif $member['edu'] == '大专' /}
											<option>大专</option>
											<option>中专</option>
											<option>高中</option>
											<option>初中</option>
											<option>小学</option>
											<option>无</option>
											<option>本科</option>
											<option>硕士</option>
											<option>博士</option>
											{elseif $member['edu'] == '本科' /}
											<option>本科</option>
											<option>大专</option>
											<option>中专</option>
											<option>高中</option>
											<option>初中</option>
											<option>小学</option>
											<option>无</option>
											<option>硕士</option>
											<option>博士</option>
											{elseif $member['edu'] == '硕士' /}
											<option>硕士</option>
											<option>本科</option>
											<option>大专</option>
											<option>中专</option>
											<option>高中</option>
											<option>初中</option>
											<option>小学</option>
											<option>无</option>
											<option>博士</option>
											{elseif $member['edu'] == '博士' /}
											<option>博士</option>
											<option>硕士</option>
											<option>本科</option>
											<option>大专</option>
											<option>中专</option>
											<option>高中</option>
											<option>初中</option>
											<option>小学</option>
											<option>无</option>
											{/if}
										</select>
									</div>
								</div>
								<div class="form-group row col-md-6">
									<label class="col-sm-2 col-form-label" style="line-height:2.5;">电话：</label>
									<div class="col-sm-10">
										<input type="text" class="form-control" name="tel" value="{$member.tel}" id="tel" placeholder="电话">
									</div>
								</div>
							</div>
							<div class="input-group" data-toggle="distpicker">
								<div class="form-group row col-md-4">
									<label class="col-sm-2 col-form-label" style="line-height:2.5;">省份：</label>
									<div class="col-sm-6">
										<select class="form-control" name="province" id="province1">
											<option>{$member.province}</option>
										</select>
									</div>
								</div>
								<div class="form-group row col-md-4">
									<label class="col-sm-2 col-form-label" style="line-height:2.5;">市辖：</label>
									<div class="col-sm-6">
										<select class="form-control" name="city" id="city1">
											<option>{$member.city}</option>
										</select>
									</div>
								</div>
								<div class="form-group row col-md-4">
									<label class="col-sm-2 col-form-label" style="line-height:2.5;">区域：</label>
									<div class="col-sm-6">
										<select class="form-control" name="area" id="district1">
											<option>{$member.area}</option>
										</select>
									</div>
								</div>
							</div>
							<div class="input-group">
								<div class="form-group row col-md-6">
									<label class="col-sm-2 col-form-label" style="line-height:2.5;">详细地址：</label>
									<div class="col-sm-10">
										<input type="text" class="form-control" name="addr" value="{$member.addr}" id="addr" placeholder="详细地址">
									</div>
								</div>
							</div>
							<div class="form-group row">
								<button type="submit" class="btn btn-primary" style="margin: auto;">保存</button>
							</div>
						</div>
					</div>
					</form>
				</div>
					<!-- /Form Item -->
			</div>
		</div>
	</div>
	<!-- /Main Content -->
</div>
<!--<script src="http://www.jq22.com/jquery/1.11.1/jquery.min.js"></script>-->
<script src="__ADMIN__/js/jquery-3.2.1.min.js"></script>
<!--<script src="http://www.jq22.com/jquery/bootstrap-3.3.4.js"></script>-->
<script src="__ADMIN__/js/distpicker.data.js"></script>
<script src="__ADMIN__/js/distpicker.js"></script>
<script src="__ADMIN__/js/main.js"></script>
<!-- /Page Content -->
{/block}
</body>
{block name='other'}
<!--无限级分类-->
<link rel="stylesheet" href="__ADMIN__/css/demo.css" type="text/css">
<link rel="stylesheet" href="__ADMIN__/css/zTreeStyle/zTreeStyle.css" type="text/css">


<!--无限级分类-->
<!--无限级分类js-->
<script type="text/javascript" src="__ADMIN__/js/jquery.ztree.core.js"></script>
<script type="text/javascript" src="__ADMIN__/js/jquery.ztree.excheck.js"></script>
<script>
	var _url = "{:url('Member/isMembercard')}";
	var _type = 2;
</script>
<script src="__ADMIN__/js/make_card.js"></script>
<script type="text/javascript">


	/* 获取健康指标对应项结果 */
	function getItemVal(type) {
		if(type == "BMI") {		//BMI
			var height = $.trim($("#shengao").val());
			var weight = $.trim($("#tizhong").val());
			if(height != "" && weight != "") {
				value1 = (weight / Math.pow(height / 100, 2)).toFixed(2);
				$("#BMI").val(value1);
				if(value1 < 18.5){
					$("#appraiseBMI").val('过低');
				}else if(value1 >= 18.5 && value1 <= 23.9){
					$("#appraiseBMI").val('正常');
				}else if(value1 >= 24 && value1 <= 27){
					$("#appraiseBMI").val('过重');
				}else if(value1 >= 28 && value1 <= 32){
					$("#appraiseBMI").val('肥胖');
				}else if(value1 > 32){
					$("#appraiseBMI").val('非常肥胖');
				}
			}
		} else if(type == "WAIST") {	//腰围
			var waist = $.trim($("#yaowei").val());
			var hip = $.trim($("#tunwei").val());
//			var sex = $("#gender").val();
			if(waist != "" && hip != "") {
				yao = (waist / hip).toFixed(2);
				$("#whr").val(yao);
				if(yao > 0.9){
					$("#appraiseWAIST").val('肥胖');
				}else if(yao < 0.9){
					$("#appraiseWAIST").val('正常');
				}
			}
		} else if(type == "PRESSURE") {	 //血压
			var sp = $.trim($("#shousuoya").val());
			var dp = $.trim($("#shuzhangya").val());
			if(sp != "" && dp != "") {
				if((sp <= 130 && sp >= 90) &&  (dp <= 85 && dp >=60)){
					$("#appraisePRESSURE").val('正常血压');
				}else if((sp <= 139 && sp >= 130) && (dp <= 89 && dp >= 85)){
					$("#appraisePRESSURE").val('正常高值');
				}else if((sp <= 159 && sp > 140) && (dp <= 99 && dp >= 90)){
					$("#appraisePRESSURE").val('一级高血压');
				}else if((sp <= 179 && sp >= 160) && (dp <= 109 && dp >= 100)){
					$("#appraisePRESSURE").val('二级高血压');
				}else if(sp >= 180 && dp >= 110){
					$("#appraisePRESSURE").val('三级高血压');
				}else if(sp >= 140 && dp < 90){
					$("#appraisePRESSURE").val('单纯收缩性高血压');
				}else if(sp < 90){
					$("#appraisePRESSURE").val('低血压');
				}else if(dp < 60){
					$("#appraisePRESSURE").val('低血压');
				}
			}
		} else if(type == "PG") {	//血糖
			var fpg = $.trim($("#fpg").val());
			var hpg = $.trim($("#hpg").val());
			if(fpg != "" && hpg != "") {
				if(fpg < 3.9 || hpg < 4.4){
					$("#appraisePG").val("异常血糖");
					return;
				}else if((fpg >= 3.9 && fpg <= 6) && (hpg >= 4.4 && hpg <= 7.8)){
					$("#appraisePG").val("正常血糖");
				}else if((fpg > 3.9 && fpg < 7) && (hpg < 7.8 && hpg > 4.4)){
					$("#appraisePG").val("空腹血糖受损");
				}else if((fpg > 6 && fpg < 7) && (hpg > 7.8 && hpg < 11)) {
					$("#appraisePG").val("糖耐量减低");
				}else if(hpg > 11 || fpg > 6.9) {
					$("#appraisePG").val("糖尿病");
				}
			}
		} else if(type == "BUA") {	//血尿酸
			var bua = $.trim($("#bua").val());
			if(bua != "") {
				if(bua >= 150 && bua <= 420){
					$("#appraiseBUA").val("正常");
				}else{
					$("#appraiseBUA").val("非正常");
				}
			}
		} else if(type == "HBALC") {	//糖化血红蛋白
			var gh = $.trim($("#gh").val());
			if(gh != "") {
				if(gh >= 10){
					$("#appraiseHBALC").val('控制差');
				}else if(gh >= 9 && gh < 10){
					$("#appraiseHBALC").val('控制不好');
				}else if(gh >= 8 && gh < 9){
					$("#appraiseHBALC").val('可以接受');
				}else if(gh >= 6 && gh < 8){
					$("#appraiseHBALC").val('控制理想');
				}else if(gh >= 4 && gh < 6){
					$("#appraiseHBALC").val('正常值');
				}else if(gh < 4){
					$("#appraiseHBALC").val('非正常');
				}
			}
		} else if(type == "TCG") { //总胆固醇和甘油三脂
			var tg = $.trim($("#tc").val());
			var tc = $.trim($("#tg").val());
			if(tc != "" && tg != "") {
				if((tc >= 0.56 && tc <= 1.70) && (tg >= 2.84 && tg <= 5.20)){
					$("#appraiseTCG").val('正常');
				}else if(tg > 5.20 && (tc >= 0.56 && tc < 1.70)){
					$("#appraiseTCG").val('高胆固醇血症');
				}else if((tg >= 2.84 &&  tg < 5.20) && tc > 1.70){
					$("#appraiseTCG").val('高甘油三脂血症');
				}else if((tg >= 2.84 && tg > 5.20) && (tc >= 0.56 && tc > 1.70)){
					$("#appraiseTCG").val('混合型高脂血症');
				}else{
					$("#appraiseTCG").val('非正常');
				}
			}
		} else if(type == "HDL" || type=="LDL"){	//高密度脂蛋白
			var hdl = $.trim($("#hdl").val());
			var ldl = $.trim($("#ldl").val());
			if(hdl != "") {
				if(hdl<0.91){
					$("#appraiseHDL").val("低高密度脂蛋白胆固醇血症");
					return;
				}else if(hdl>1.76){
					$("#appraiseHDL").val("非正常");
					return;
				}else{
					$("#appraiseHDL").val("正常");
				}
			}
			if(ldl != "") {
				if(ldl<2.10){
					$("#appraiseHDL").val("非正常");
					return;
				}else if(ldl>3.10){
					$("#appraiseHDL").val("非正常");
					return;
				}else{
					$("#appraiseHDL").val("正常");
				}
			}
		} else if(type == "DKA") {	//血酮
			var dka = $.trim($("#dka").val());
			if(dka != "") {
				params.value1 = dka;
				params.flag = 1;
				getResult(params);
			}
		} else if(type == "HCY"){	//同型半胱氨酸
			var hcy = $.trim($("#hcy").val());
			if(hcy != "") {
				if(hcy < 5){
					$("#appraiseHCY").val("↓低于参考值");
				}else if(hcy > 10){
					$("#appraiseHCY").val("↑超过参考值");
				}else if(hcy > 5 && hcy < 10){
					$("#appraiseHCY").val("正常");
				}
			}
		} else if(type == "BMD_T") {	//骨密度T值
			var bmdt = $.trim($("#bmdt").val());
			if(bmdt != "") {
				if(bmdt >= 1){
					$("#appraiseBMD_T").val("非正常范围值");
				}else if(bmdt < 1 && bmdt > -1){
					$("#appraiseBMD_T").val("正常");
				}else if(bmdt >= -2.5 && bmdt < -1){
					$("#appraiseBMD_T").val("骨量低");
				}else if(bmdt < -2.6){
					$("#appraiseBMD_T").val("骨质疏松症");
				}
			}
		}
	}
	var setting = {
		check: {
			enable: true,
//			chkStyle: "radio",
//			radioType: "all",
			chkboxType: {"Y":"", "N":""}
		},
		view: {
			dblClickExpand: false
		},
		data: {
			simpleData: {
				enable: true
			}
		},
		callback: {
			beforeClick: beforeClick,
			onCheck: onCheck
		}
	};
	var url = "{:url('Disease/getDisease')}";
	var zNodes = [];
	$.ajaxSettings.async = false;
	$.post(url,function(data){
		zNodes = $.parseJSON( data );
	})
	function beforeClick(treeId, treeNode) {
		//console.log($.fn.zTree)
		var zTree = $.fn.zTree.getZTreeObj("treeDemo");
		zTree.checkNode(treeNode, !treeNode.checked, null, true);
		return false;
	}

	function onCheck(e, treeId, treeNode) {
		var zTree = $.fn.zTree.getZTreeObj("treeDemo"),
				nodes = zTree.getCheckedNodes(true),
				v = "";
		id = "";
		for (var i=0, l=nodes.length; i<l; i++) {
			v += nodes[i].name + ",";
			id += nodes[i].id;
		}
		if (v.length > 0 ) v = v.substring(0, v.length-1);
		var cityObj = $("#citySel");
        cityObj.attr("value", v);
		var cityObjId = $("#cityId");
		cityObjId.attr("value", id);
//        console.log(id);
	}

	function showMenu() {
		var cityObj = $("#citySel");
		var cityOffset = $("#citySel").offset();
//		$("#menuContent").css({left:cityOffset.left + "px", top:cityOffset.top + cityObj.outerHeight() + "px"}).slideDown("fast");
		$("#menuContent").slideDown("fast");
		$("body").bind("mousedown", onBodyDown);
	}
	function hideMenu() {
		$("#menuContent").fadeOut("fast");
		$("body").unbind("mousedown", onBodyDown);
	}
	function onBodyDown(event) {
		if (!(event.target.id == "menuBtn" || event.target.id == "citySel" || event.target.id == "menuContent" || $(event.target).parents("#menuContent").length>0)) {
			hideMenu();
		}
	}
	$.fn.zTree.init($("#treeDemo"), setting, zNodes);


	//第二个
	var setting = {
		check: {
			enable: true,
//			chkStyle: "radio",
//			radioType: "all",
			chkboxType: {"Y":"", "N":""}
		},
		view: {
			dblClickExpand: false
		},
		data: {
			simpleData: {
				enable: true
			}
		},
		callback: {
			beforeClick: beforeClick2,
			onCheck: onCheck2
		}
	};
	function beforeClick2(treeId, treeNode) {
		//console.log($.fn.zTree)
		var zTree = $.fn.zTree.getZTreeObj("treeDemo2");
		zTree.checkNode(treeNode, !treeNode.checked, null, true);
		return false;
	}

	function onCheck2(e, treeId, treeNode) {
		var zTree = $.fn.zTree.getZTreeObj("treeDemo2"),
				nodes = zTree.getCheckedNodes(true),
				v = "";
		id = "";
		for (var i=0, l=nodes.length; i<l; i++) {
			v += nodes[i].name + ",";
			id += nodes[i].id;
		}
		if (v.length > 0 ) v = v.substring(0, v.length-1);
		var cityObj = $("#citySel2");
		cityObj.attr("value", v);
		var cityObjId = $("#cityId2");
		cityObjId.attr("value", id);
//        console.log(id);
	}

	function showMenu2() {
		var cityObj = $("#citySel2");
		var cityOffset = $("#citySel2").offset();
//		$("#menuContent").css({left:cityOffset.left + "px", top:cityOffset.top + cityObj.outerHeight() + "px"}).slideDown("fast");
		$("#menuContent2").slideDown("fast");
		$("body").bind("mousedown", onBodyDown2);
	}
	function hideMenu2() {
		$("#menuContent2").fadeOut("fast");
		$("body").unbind("mousedown", onBodyDown2);
	}
	function onBodyDown2(event) {
		if (!(event.target.id == "menuBtn2" || event.target.id == "citySel2" || event.target.id == "menuContent2" || $(event.target).parents("#menuContent2").length>0)) {
			hideMenu2();
		}
	}
	$.fn.zTree.init($("#treeDemo2"), setting, zNodes);

	//第三个
	var setting = {
		check: {
			enable: true,
//			chkStyle: "radio",
//			radioType: "all",
			chkboxType: {"Y":"", "N":""}
		},
		view: {
			dblClickExpand: false
		},
		data: {
			simpleData: {
				enable: true
			}
		},
		callback: {
			beforeClick: beforeClick3,
			onCheck: onCheck3
		}
	};
	function beforeClick3(treeId, treeNode) {
		//console.log($.fn.zTree)
		var zTree = $.fn.zTree.getZTreeObj("treeDemo3");
		zTree.checkNode(treeNode, !treeNode.checked, null, true);
		return false;
	}

	function onCheck3(e, treeId, treeNode) {
		var zTree = $.fn.zTree.getZTreeObj("treeDemo3"),
				nodes = zTree.getCheckedNodes(true),
				v = "";
		id = "";
		for (var i=0, l=nodes.length; i<l; i++) {
			v += nodes[i].name + ",";
			id += nodes[i].id;
		}
		if (v.length > 0 ) v = v.substring(0, v.length-1);
		var cityObj = $("#citySel3");
		cityObj.attr("value", v);
		var cityObjId = $("#cityId3");
		cityObjId.attr("value", id);
//        console.log(id);
	}

	function showMenu3() {
		var cityObj = $("#citySel3");
		var cityOffset = $("#citySel3").offset();
//		$("#menuContent").css({left:cityOffset.left + "px", top:cityOffset.top + cityObj.outerHeight() + "px"}).slideDown("fast");
		$("#menuContent3").slideDown("fast");
		$("body").bind("mousedown", onBodyDown3);
	}
	function hideMenu3() {
		$("#menuContent3").fadeOut("fast");
		$("body").unbind("mousedown", onBodyDown3);
	}
	function onBodyDown3(event) {
		if (!(event.target.id == "menuBtn3" || event.target.id == "citySel3" || event.target.id == "menuContent3" || $(event.target).parents("#menuContent3").length>0)) {
			hideMenu3();
		}
	}
	$.fn.zTree.init($("#treeDemo3"), setting, zNodes);

	//第四个
	var setting = {
		check: {
			enable: true,
//			chkStyle: "radio",
//			radioType: "all",
			chkboxType: {"Y":"", "N":""}
		},
		view: {
			dblClickExpand: false
		},
		data: {
			simpleData: {
				enable: true
			}
		},
		callback: {
			beforeClick: beforeClick4,
			onCheck: onCheck4
		}
	};
	function beforeClick4(treeId, treeNode) {
		//console.log($.fn.zTree)
		var zTree = $.fn.zTree.getZTreeObj("treeDemo4");
		zTree.checkNode(treeNode, !treeNode.checked, null, true);
		return false;
	}

	function onCheck4(e, treeId, treeNode) {
		var zTree = $.fn.zTree.getZTreeObj("treeDemo4"),
				nodes = zTree.getCheckedNodes(true),
				v = "";
		id = "";
		for (var i=0, l=nodes.length; i<l; i++) {
			v += nodes[i].name + ",";
			id += nodes[i].id;
		}
		if (v.length > 0 ) v = v.substring(0, v.length-1);
		var cityObj = $("#citySel4");
		cityObj.attr("value", v);
		var cityObjId = $("#cityId4");
		cityObjId.attr("value", id);
//        console.log(id);
	}

	function showMenu4() {
		var cityObj = $("#citySel4");
		var cityOffset = $("#citySel4").offset();
//		$("#menuContent").css({left:cityOffset.left + "px", top:cityOffset.top + cityObj.outerHeight() + "px"}).slideDown("fast");
		$("#menuContent4").slideDown("fast");
		$("body").bind("mousedown", onBodyDown4);
	}
	function hideMenu4() {
		$("#menuContent4").fadeOut("fast");
		$("body").unbind("mousedown", onBodyDown4);
	}
	function onBodyDown4(event) {
		if (!(event.target.id == "menuBtn4" || event.target.id == "citySel4" || event.target.id == "menuContent4" || $(event.target).parents("#menuContent4").length>0)) {
			hideMenu4();
		}
	}
	$.fn.zTree.init($("#treeDemo4"), setting, zNodes);


	//第五个
	var setting = {
		check: {
			enable: true,
//			chkStyle: "radio",
//			radioType: "all",
			chkboxType: {"Y":"", "N":""}
		},
		view: {
			dblClickExpand: false
		},
		data: {
			simpleData: {
				enable: true
			}
		},
		callback: {
			beforeClick: beforeClick5,
			onCheck: onCheck5
		}
	};
	function beforeClick5(treeId, treeNode) {
		//console.log($.fn.zTree)
		var zTree = $.fn.zTree.getZTreeObj("treeDemo5");
		zTree.checkNode(treeNode, !treeNode.checked, null, true);
		return false;
	}

	function onCheck5(e, treeId, treeNode) {
		var zTree = $.fn.zTree.getZTreeObj("treeDemo5"),
				nodes = zTree.getCheckedNodes(true),
				v = "";
		id = "";
		for (var i=0, l=nodes.length; i<l; i++) {
			v += nodes[i].name + ",";
			id += nodes[i].id;
		}
		if (v.length > 0 ) v = v.substring(0, v.length-1);
		var cityObj = $("#citySel5");
		cityObj.attr("value", v);
		var cityObjId = $("#cityId5");
		cityObjId.attr("value", id);
//        console.log(id);
	}

	function showMenu5() {
		var cityObj = $("#citySel5");
		var cityOffset = $("#citySel5").offset();
//		$("#menuContent").css({left:cityOffset.left + "px", top:cityOffset.top + cityObj.outerHeight() + "px"}).slideDown("fast");
		$("#menuContent5").slideDown("fast");
		$("body").bind("mousedown", onBodyDown5);
	}
	function hideMenu5() {
		$("#menuContent5").fadeOut("fast");
		$("body").unbind("mousedown", onBodyDown5);
	}
	function onBodyDown5(event) {
		if (!(event.target.id == "menuBtn5" || event.target.id == "citySel5" || event.target.id == "menuContent5" || $(event.target).parents("#menuContent5").length>0)) {
			hideMenu5();
		}
	}
	$.fn.zTree.init($("#treeDemo5"), setting, zNodes);
	//控制单选框是否选中文本框也是否可写
//	function radio_click(obj){
//		if(obj == 1){
//			alert(1);
//		}else if(obj == 0) {
//			$('#menuBtn').off('onclick');
//		}
//	}

	//添加病列
	var urladd = "{:url('Disease/add')}";
	function formSubmit() {
		var data = $('#subform').serialize();
		$.post(urladd,{form:data},function(data){
			alert(data);
			window.location.reload();
		})
	}

	//删除病列
	var urldel = "{:url('Disease/del')}";
	function del(id) {
		$.post(urldel,{id:id},function(data){
			alert(data);
			window.location.reload();
		})
	}

</script>
{/block}